<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.Author.Book.Manager.mapper.BookMapper">
    <select id="findAll">
        SELECT
            id,
            title,
            author_id AS authorId,
            published_year AS publishedYear,
            author,
            price,
            rating,
            category,
            cover_image AS coverImage,
            description,
            is_best_seller AS isBestSeller,
            review
        FROM books
        WHERE #{category} = 'All' OR category = #{category};
    </select>
    <select id="findById">
        SELECT
            id,
            title,
            author_id AS authorId,
            published_year AS publishedYear
        FROM books WHERE id = #{id};
    </select>
    <insert id="insert">
        INSERT INTO books
        (
            title,
            author_id,
            published_year
        )
        VALUES
        (
            #{title},
            #{authorId},
            #{publishedYear}
        )
    </insert>
    <update id="update">
        UPDATE books SET published_year=#{publishedYear}, title=#{title}, author_id=#{authorId} where id=#{id}
    </update>
    <delete id="delete">
        DELETE FROM books WHERE id=#{id}
    </delete>
</mapper>